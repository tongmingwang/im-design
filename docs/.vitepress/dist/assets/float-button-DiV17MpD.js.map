{"version":3,"file":"float-button-DiV17MpD.js","sources":["../../packages/utils/constance.ts","../../packages/hooks/useToken.ts","../../packages/components/ImButton/ImButton.vue","../../app/src/views/base/float-button.vue"],"sourcesContent":["export const token = Symbol('im-design-token');\r\n","import { token } from '@/utils/constance';\r\nimport { ref, inject } from 'vue';\r\nimport { type ImDesignOptions } from '@/types';\r\nexport const useToken = () => {\r\n  const injectData = inject(token) as ImDesignOptions;\r\n  const sizeToken = ref(Number(injectData?.size || 36));\r\n  const zIndexToken = ref(injectData?.zIndex || 1000);\r\n  return { sizeToken, zIndexToken };\r\n};\r\n","<template>\r\n  <button\r\n    v-bind=\"attrs\"\r\n    :class=\"classname\"\r\n    @click=\"handleClick\"\r\n    ref=\"buttonRef\"\r\n    :style=\"style\"\r\n    v-ripple=\"!props.disabled && !props.loading\"\r\n    :tabindex=\"props.tabindex || 0\"\r\n    :type=\"props.type || 'button'\"\r\n    :disabled=\"props.disabled || props.loading\">\r\n    <span :class=\"[bem.e('loading')]\" v-if=\"props.loading\">\r\n      <svg fill=\"currentColor\" viewBox=\"0 0 1024 1024\" width=\"1em\" height=\"1em\">\r\n        <path\r\n          d=\"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 0 0-94.3-139.9 437.71 437.71 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3 0.1 19.9-16 36-35.9 36z\"></path>\r\n      </svg>\r\n    </span>\r\n    <slot v-if=\"!hideContent\">{{ props.text }}</slot>\r\n  </button>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { type ButtonProps } from './ButtonProp';\r\nimport { useBem } from '@/utils/bem';\r\nimport { computed, ref, useAttrs } from 'vue';\r\nimport { useToken } from '@/hooks/useToken';\r\nimport { getSizeValue } from '@/utils';\r\nimport { ripple } from '@/directive';\r\n// 注册指令,\r\nconst vRipple = ripple;\r\n\r\ndefineOptions({ name: 'ImButton' });\r\nconst props = defineProps<ButtonProps>();\r\nconst emit = defineEmits<{ (e: 'click', event: Event): void }>();\r\nconst bem = useBem('button');\r\nconst { sizeToken } = useToken();\r\nconst attrs = useAttrs();\r\nconst classname = computed(() => {\r\n  return [\r\n    bem.b(),\r\n    props.color && bem.m(props.color),\r\n    props.shape && bem.m(props.shape),\r\n    props.variant && bem.m(props.variant),\r\n    bem.is('disabled', props.disabled),\r\n    bem.is('loading', props.loading),\r\n  ].filter(Boolean);\r\n});\r\nconst buttonRef = ref<HTMLButtonElement>();\r\nconst style = computed(() => {\r\n  let s = +(props.size || sizeToken.value || 36);\r\n  return {\r\n    '--im-button-size': getSizeValue(s),\r\n    '--im-button-padding': (s * 0.45).toFixed(0) + 'px',\r\n    width: props.width,\r\n  };\r\n});\r\ndefineExpose({\r\n  ref: buttonRef,\r\n  $el: buttonRef,\r\n  focus: () => buttonRef.value?.focus(),\r\n  blur: () => buttonRef.value?.blur(),\r\n});\r\n\r\n// 不需要显示内容\r\nconst hideContent = computed(() => {\r\n  return props.loading && ['square', 'circle'].includes(props.shape!);\r\n});\r\n\r\nconst handleClick = (e: Event) => {\r\n  if (props.disabled || props.loading) return;\r\n  emit('click', e);\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@mixin btn-colors($bg, $color, $borderColor) {\r\n  background-color: $bg;\r\n  border-color: $borderColor;\r\n  color: $color;\r\n}\r\n\r\n@keyframes loading {\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n.im-button {\r\n  border: 1px solid transparent;\r\n  outline: none;\r\n  user-select: none;\r\n  cursor: pointer;\r\n  border-radius: var(--im-radius);\r\n  height: var(--im-button-size);\r\n  padding: 0 var(--im-button-padding);\r\n  letter-spacing: 0.02857em;\r\n  font-family: inherit;\r\n  transition: all 0.2s ease-in-out;\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  align-self: center;\r\n  overflow: hidden;\r\n  vertical-align: middle;\r\n  text-wrap: nowrap;\r\n  @include btn-colors(\r\n    var(--im-bg-content-color),\r\n    var(--im-gray-color-10),\r\n    var(--im-gray-color-5)\r\n  );\r\n\r\n  &:hover {\r\n    @include btn-colors(\r\n      var(--im-gray-color-1),\r\n      var(--im-primary-color-8),\r\n      var(--im-primary-color-8)\r\n    );\r\n  }\r\n\r\n  &.is-loading {\r\n    pointer-events: none;\r\n    opacity: 0.75;\r\n  }\r\n\r\n  &.is-disabled {\r\n    cursor: not-allowed;\r\n    @include btn-colors(\r\n      var(--im-gray-color-3),\r\n      var(--im-gray-color-6),\r\n      var(--im-gray-color-5)\r\n    );\r\n\r\n    &:hover {\r\n      @include btn-colors(\r\n        var(--im-gray-color-3),\r\n        var(--im-gray-color-6),\r\n        var(--im-gray-color-5)\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\n@each $color in (primary, success, warning, error) {\r\n  .im-button--#{$color} {\r\n    border-width: 0;\r\n    @include btn-colors(\r\n      var(--im-#{$color}-color-8),\r\n      var(--im-gray-color-1),\r\n      var(--im-#{$color}-color-8)\r\n    );\r\n\r\n    &:hover {\r\n      @include btn-colors(\r\n        var(--im-#{$color}-color-9),\r\n        var(--im-gray-color-1),\r\n        var(--im-#{$color}-color-9)\r\n      );\r\n    }\r\n\r\n    &.is-disabled,\r\n    &.is-disabled:hover,\r\n    &.is-disabled:active {\r\n      cursor: not-allowed;\r\n      @include btn-colors(\r\n        var(--im-#{$color}-color-3),\r\n        var(--im-gray-color-1),\r\n        var(--im-#{$color}-color-3)\r\n      );\r\n    }\r\n\r\n    &.im-button--text {\r\n      color: var(--im-#{$color}-color-8);\r\n\r\n      &:hover {\r\n        background-color: var(--im-#{$color}-color-1);\r\n        border-color: transparent;\r\n        color: var(--im-#{$color}-color-8);\r\n      }\r\n\r\n      &.is-disabled,\r\n      &.is-disabled:hover {\r\n        @include btn-colors(\r\n          transparent,\r\n          var(--im-#{$color}-color-4),\r\n          transparent\r\n        );\r\n      }\r\n    }\r\n\r\n    &.im-button--tonal {\r\n      @include btn-colors(\r\n        var(--im-#{$color}-color-1),\r\n        var(--im-#{$color}-color-8),\r\n        var(--im-#{$color}-color-1)\r\n      );\r\n\r\n      &:hover {\r\n        @include btn-colors(\r\n          var(--im-#{$color}-color-2),\r\n          var(--im-#{$color}-color-9),\r\n          var(--im-#{$color}-color-2)\r\n        );\r\n      }\r\n\r\n      &.is-disabled,\r\n      &.is-disabled:hover {\r\n        @include btn-colors(\r\n          var(--im-#{$color}-color-1),\r\n          var(--im-#{$color}-color-4),\r\n          var(--im-#{$color}-color-1)\r\n        );\r\n      }\r\n    }\r\n\r\n    &.im-button--outlined {\r\n      color: var(--im-#{$color}-color-8);\r\n      border-width: 1px;\r\n\r\n      &:hover {\r\n        background-color: var(--im-#{$color}-color-1);\r\n      }\r\n\r\n      &.is-disabled,\r\n      &.is-disabled:hover {\r\n        @include btn-colors(\r\n          transparent,\r\n          var(--im-#{$color}-color-4),\r\n          var(--im-#{$color}-color-3)\r\n        );\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.im-button--round {\r\n  border-radius: calc(var(--im-button-size) / 2);\r\n}\r\n\r\n.im-button--circle {\r\n  border-radius: 50%;\r\n  max-width: var(--im-button-size) !important;\r\n  width: var(--im-button-size);\r\n  min-width: var(--im-button-size);\r\n  padding: 0;\r\n\r\n  .im-button__loading {\r\n    margin-right: 0;\r\n  }\r\n}\r\n\r\n.im-button--square {\r\n  max-width: var(--im-button-size) !important;\r\n  width: var(--im-button-size);\r\n  min-width: var(--im-button-size);\r\n  padding: 0;\r\n\r\n  .im-button__loading {\r\n    margin-right: 0;\r\n  }\r\n}\r\n\r\n.im-button--text {\r\n  border: none;\r\n  background-color: transparent;\r\n  padding: 6px 8px;\r\n\r\n  &:hover {\r\n    background-color: var(--im-rgb-color-1);\r\n    color: var(--im-gray-color-10);\r\n  }\r\n}\r\n\r\n.im-button--tonal {\r\n  background-color: var(--im-rgb-color-1);\r\n  border: none;\r\n\r\n  &:hover {\r\n    background-color: var(--im-rgb-color-2);\r\n    color: var(--im-gray-color-10);\r\n  }\r\n}\r\n\r\n.im-button--outlined {\r\n  background-color: var(--im-gray-color-1);\r\n}\r\n\r\n.im-button__loading {\r\n  animation: loading 1.2s linear infinite;\r\n  margin-right: 8px;\r\n}\r\n</style>\r\n","<script setup lang=\"ts\">\r\nimport ImButton from '@/components/ImButton/ImButton.vue';\r\nimport CodeView from '@app/src/components/CodeView.vue';\r\nconst apiList = [\r\n  {\r\n    name: 'size',\r\n    type: 'string | number',\r\n    default: '36',\r\n    description: '按钮大小',\r\n    otherValue: '-',\r\n  },\r\n  {\r\n    name: 'shape',\r\n    type: 'string',\r\n    default: 'square',\r\n    description: '按钮形状',\r\n    otherValue: 'circle',\r\n  },\r\n\r\n  {\r\n    name: 'open',\r\n    type: 'boolean',\r\n    default: 'false',\r\n    description: '是否显示浮动按钮内容',\r\n    otherValue: '-',\r\n  },\r\n  {\r\n    name: 'right',\r\n    type: 'string | number',\r\n    default: '20px',\r\n    description: '距离右侧的距离',\r\n    otherValue: '-',\r\n  },\r\n  {\r\n    name: 'bottom',\r\n    type: 'string | number',\r\n    default: '20px',\r\n    description: '距离底部的距离',\r\n    otherValue: '-',\r\n  },\r\n];\r\n\r\nconst code = ` \r\n        <ImFloatButton shape=\"circle\">\r\n          <template #default=\"{ open }\">\r\n            <ImButton shape=\"circle\" variant=\"text\">\r\n              <ImIcon :name=\"open ? 'close' : 'up'\" size=\"18\"></ImIcon>\r\n            </ImButton>\r\n          </template>\r\n          <template #content>\r\n            <ImButton shape=\"circle\" variant=\"tonal\" color=\"primary\"\r\n              >按钮1</ImButton\r\n            >\r\n            <ImButton shape=\"circle\" variant=\"tonal\" color=\"primary\"\r\n              >按钮2</ImButton\r\n            >\r\n          </template>\r\n        </ImFloatButton>`;\r\n</script>\r\n\r\n<template>\r\n  <PageWrapper\r\n    title=\"FloatButton 浮动按钮\"\r\n    desc=\"用于固定于某一区域，方便快捷操作\">\r\n    <PageCard\r\n      title=\"基础用法\"\r\n      desc=\"ImFloatButton 支持 size shape right bottom open等属性设置\">\r\n      <CodeTemp>\r\n        <ImFloatButton shape=\"circle\">\r\n          <template #default=\"{ open }\">\r\n            <ImButton shape=\"circle\" variant=\"text\">\r\n              <ImIcon :name=\"open ? 'close' : 'up'\" size=\"18\"></ImIcon>\r\n            </ImButton>\r\n          </template>\r\n          <template #content>\r\n            <ImButton shape=\"circle\" variant=\"tonal\" color=\"primary\"\r\n              >按钮1</ImButton\r\n            >\r\n            <ImButton shape=\"circle\" variant=\"tonal\" color=\"primary\"\r\n              >按钮2</ImButton\r\n            >\r\n          </template>\r\n        </ImFloatButton>\r\n        请在右下角浮动按钮，点击可以收起和展开内容。\r\n        <template #code>\r\n          <CodeView :code=\"code\" />\r\n        </template>\r\n      </CodeTemp>\r\n    </PageCard>\r\n\r\n    <PageCard title=\"Api\" desc=\"Button 组件提供了以下属性：\">\r\n      <ComponentApi :data=\"apiList\" />\r\n    </PageCard>\r\n  </PageWrapper>\r\n</template>\r\n"],"names":["token","useToken","injectData","inject","sizeToken","ref","zIndexToken","vRipple","ripple","props","__props","emit","__emit","bem","useBem","attrs","useAttrs","classname","computed","buttonRef","style","s","getSizeValue","__expose","_a","hideContent","handleClick","e","_createElementBlock","_mergeProps","_unref","_normalizeClass","_createElementVNode","_renderSlot","_ctx","_createTextVNode","_toDisplayString","code","apiList","_createBlock","_component_PageWrapper","_createVNode","_component_PageCard","_component_CodeTemp","CodeView","_component_ImFloatButton","_withCtx","open","ImButton","_component_ImIcon","_cache","_component_ComponentApi"],"mappings":"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"}