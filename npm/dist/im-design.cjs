"use strict";var S=o=>{throw TypeError(o)};var $=(o,n,t)=>n.has(o)||S("Cannot "+t);var E=(o,n,t)=>($(o,n,"read from private field"),t?t.call(o):n.get(o)),N=(o,n,t)=>n.has(o)?S("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(o):n.set(o,t),D=(o,n,t,l)=>($(o,n,"write to private field"),l?l.call(o,t):n.set(o,t),t);Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),V=Symbol("im-design-token");var I;class A{constructor(){N(this,I);D(this,I,[])}async add(n){E(this,I).push(n)}remove(){try{const n=E(this,I).shift();n&&this.run(n)}catch(n){console.error(n)}}async run(n){try{const t=n.querySelector(".im-ripple__item");if(!t)return;let l=Date.now(),s=t.getAttribute("data-time");const c=l-Number(s)||0;c&&await new Promise(r=>{t.style.opacity="0.1";const p=200-c;setTimeout(()=>{r(null)},p>0?p:0)}),t.style.opacity="0",t.style.transition="all 50ms ",setTimeout(()=>{n&&(n==null||n.remove())},50)}catch(t){console.log(t)}}}I=new WeakMap;const W={mounted(o,n){(function(){o.addEventListener("mousedown",s,{passive:!0}),o.addEventListener("mouseup",c,{passive:!0})})();const l=new A;async function s(r){if(!n.value)return;const p=window.getComputedStyle(o),d=o.getBoundingClientRect(),f=document.createElement("div");f.className="im-ripple",l.add(f);const a=document.createElement("div");a.className="im-ripple__item";const i=r.clientX||r.touches&&r.touches[0].clientX,u=r.clientY||r.touches&&r.touches[0].clientY,m=Math.max(d.width,d.height),h=i-d.left-m/2,y=u-d.top-m/2,x=d.width-d.height<=5;Object.assign(a.style,{"background-color":p.color,width:`${m}px`,height:`${m}px`,left:`${h}px`,top:`${y}px`,opacity:"0.33",transform:x?"scale(1)":"scale(0.25)","will-change":"transform,opacity"}),a.setAttribute("data-time",Date.now()+""),f.appendChild(a),o.appendChild(f);const v=p.position;v==="static"&&(o.style.position="relative",o.dataset.originalPosition=v),a.getBoundingClientRect(),a.style.transform="scale(2.8)",a.style.opacity="0.33"}function c(){l.remove()}}},k=o=>{const n="im-"+o;return{b:()=>n,e:t=>`${n}__${t}`,m:t=>`${n}--${t}`,is:(t,l)=>l?`is-${t}`:""}},L=(o,n)=>{const t=e.inject(V),l=e.ref(Number(t.size||36)),s=e.ref(t.zIndex||1e3);return{sizeToken:l,zIndexToken:s}},M={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",class:"im-icon",viewBox:"0 0 1024 1024"};function q(o,n){return e.openBlock(),e.createElementBlock("svg",M,n[0]||(n[0]=[e.createElementVNode("path",{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.5 440.5 0 0 0-94.3-139.9 437.7 437.7 0 0 0-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150s83.9 101.8 109.7 162.7c26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36"},null,-1)]))}const F={render:q},O=["tabindex","type","disabled"],P=e.defineComponent({name:"ImButton",__name:"ImButton",props:{type:{},disabled:{type:Boolean},color:{},size:{},shape:{},loading:{type:Boolean},text:{},variant:{},tabindex:{},width:{}},emits:["click"],setup(o,{emit:n}){const t=o,l=n,s=k("button"),{sizeToken:c}=L(),r=e.computed(()=>[s.b(),t.color&&s.m(t.color),t.shape&&s.m(t.shape),t.variant&&s.m(t.variant),s.is("disabled",t.disabled),s.is("loading",t.loading)].filter(Boolean)),p=e.computed(()=>{let a=+(t.size||c.value||36);return{"--im-button-size":a+"px","--im-button-padding":(a*.45).toFixed(0)+"px",width:t.width}}),d=e.computed(()=>t.loading&&["square","circle"].includes(t.shape)),f=()=>{t.disabled||t.loading||l("click")};return(a,i)=>{const u=e.resolveDirective("ripple");return e.withDirectives((e.openBlock(),e.createElementBlock("button",{class:e.normalizeClass(r.value),onClick:f,style:e.normalizeStyle(p.value),tabindex:t.tabindex||0,type:t.type||"button",disabled:t.disabled||t.loading},[t.loading?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass([e.unref(s).e("loading")])},[e.createVNode(e.unref(F))],2)):e.createCommentVNode("",!0),d.value?e.createCommentVNode("",!0):e.renderSlot(a.$slots,"default",{key:1},()=>[e.createTextVNode(e.toDisplayString(t.text),1)],!0)],14,O)),[[u,!0]])}}}),_=(o,n)=>{const t=o.__vccOpts||o;for(const[l,s]of n)t[l]=s;return t},B=_(P,[["__scopeId","data-v-706dad03"]]);B.install=o=>{o.component("ImButton",B)};const j=e.defineComponent({name:"ImRow",__name:"ImRow",props:{gutter:{type:Number,default:0},align:{type:String,default:"top"}},setup(o){const n=o,t=e.useSlots(),l=e.computed(()=>{var c;return((c=t.default)==null?void 0:c.call(t))||[]}),s=k("row");return(c,r)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([e.unref(s).b()]),style:e.normalizeStyle({"--im-row-gutter":n.gutter+"px","align-items":n.align})},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.value,(p,d)=>(e.openBlock(),e.createBlock(e.resolveDynamicComponent(p),{key:d}))),128))],6))}}),w=_(j,[["__scopeId","data-v-5179967f"]]),Y=e.defineComponent({name:"ImCol",__name:"ImCol",props:{span:{type:[Number,String],default:4},offset:{type:Number,default:0}},setup(o){const n=o,t=k("col"),l=e.computed(()=>+((Number(n.span)||0)/24).toFixed(2)*100+"%");return(s,c)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([e.unref(t).b()]),style:e.normalizeStyle({"--im-col-w":l.value,"--im-col-offset":n.offset})},[e.renderSlot(s.$slots,"default",{},void 0,!0)],6))}}),C=_(Y,[["__scopeId","data-v-ecf91058"]]);w.install=o=>{o.component("ImRow",w)};C.install=o=>{o.component("ImCol",C)};const X=e.defineComponent({name:"ImInput",__name:"ImInput",props:{modelValue:{},size:{},disabled:{type:Boolean},readonly:{type:Boolean},placeholder:{},type:{},name:{},id:{},class:{},maxlength:{},minlength:{},max:{},min:{},step:{},pattern:{},required:{type:Boolean},autocomplete:{},autofocus:{type:Boolean},tabindex:{}},emits:["update:modelValue","change"],setup(o,{emit:n}){const t=o,{sizeToken:l}=L(),s=n,c=e.ref(t.modelValue),r=k("input"),p=()=>{s("update:modelValue",c.value),s("change",c.value)};return(d,f)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([e.unref(r).b()]),style:e.normalizeStyle({"--in-input-size":(t.size||e.unref(l)||36)+"px"})},[e.withDirectives(e.createElementVNode("input",e.mergeProps({class:[e.unref(r).e("input")],"onUpdate:modelValue":f[0]||(f[0]=a=>c.value=a)},t,{onInput:p}),null,16),[[e.vModelDynamic,c.value]])],6))}}),z=_(X,[["__scopeId","data-v-6c70856c"]]);z.install=o=>{o.component("ImInput",z)};const U=e.defineComponent({name:"ImIcon",__name:"ImIcon",props:{name:String,size:Number,color:String},setup(o){const n=o;return(t,l)=>(e.openBlock(),e.createElementBlock("i",{class:e.normalizeClass(["im-icon",[`im-icon-${n.name}`]]),style:e.normalizeStyle({"--icon-size":n.size||"16px","--icon-color":n.color})},null,6))}}),T=_(U,[["__scopeId","data-v-458c0f87"]]);T.install=function(o){o.component("ImIcon",T)};const H=e.defineComponent({__name:"ImDivider",props:{vertical:{type:Boolean},color:{},size:{},margin:{},className:{},textLeftWidth:{},textRightWidth:{}},setup(o){const n=k("divider"),t=o;return(l,s)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([e.unref(n).b(),e.unref(n).is("vertical",t.vertical)]),style:e.normalizeStyle({"--im-divider-color":t.color||"var(--im-gray-color-4)","--im-divider-margin-size":`${t.margin||8}px`,"--im-divider-size":`${t.size||1}px`,"--im-divider-text-left-width":t.textLeftWidth?t.textLeftWidth:"100%","--im-divider-text-right-width":t.textRightWidth?t.textRightWidth:"100%"})},[t.vertical?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass([e.unref(n).e("text")])},[e.renderSlot(l.$slots,"default",{},void 0,!0)],2))],6))}}),b=_(H,[["__scopeId","data-v-108f9bec"]]);b.name="ImDivider";b.install=function(o){o.component("ImDivider",b)};const G=(o,n)=>(n.install=t=>{t.component(o,n)},n),J=(o,n)=>{let t=null;return function(...l){t||(t=setTimeout(()=>{o.apply(this,l),t=null},n))}},K=(o,n)=>{let t=null;return function(...l){t&&clearTimeout(t),t=setTimeout(()=>{o.apply(this,l)},n)}},Q=["onClick"],Z=e.defineComponent({name:"ImAnchor",__name:"ImAnchor",props:{data:{},offset:{default:0},target:{default:null}},setup(o){const n=k("anchor");let t=null;const l=e.ref(null),s=e.ref(null),c=e.ref(null),r=o;e.watch(()=>r.target,()=>{t&&t(),t=f()}),e.onMounted(()=>{t=f()}),e.onUnmounted(()=>{t&&t()});function p(i){console.log(i,i==null?void 0:i.scrollTop,"el");let u=i==null?void 0:i.scrollTop;return l.value===window&&(u=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop),u}function d(i){var x;if(c.value||!l.value)return;const u=l.value===window?i.target:l.value;let m=p(u);const h=u.offsetTop||0,y=(r.data||[]).map(({id:v})=>{const g=document.getElementById(v);return g?{id:v,offsetTop:g.offsetTop-h,el:g}:null}).filter(Boolean);s.value=null;for(let v=0;v<y.length;v++){const g=y[v];if(m>=g.offsetTop-(r.offset||0)&&m<=g.offsetTop+(((x=g.el)==null?void 0:x.clientHeight)||0)-(r.offset||0)){s.value=g.id;return}}if(!s.value&&m>=(parseInt(String(r.offset))||0)){const v=y.find(g=>m<=g.offsetTop-(r.offset||0)&&m>(r.offset||0)?(s.value=g.id,!0):!1);v&&(s.value=v.id)}}function f(){const i=r.target?typeof r.target=="string"?document.querySelector(r.target):r.target:window;if(!i)return null;l.value=i;const u=J(d,50);return d({target:i}),i.addEventListener("scroll",u,{passive:!0}),()=>{i.removeEventListener("scroll",u)}}async function a(i){var u;if(i){c.value=i,s.value=i;const m=document.getElementById(i);if(!m)return;m.scrollIntoView({behavior:"smooth",block:"start",inline:"start"});const h=K(()=>{var y;c.value=null,(y=l.value)==null||y.removeEventListener("scroll",h)},300);(u=l.value)==null||u.addEventListener("scroll",h,{passive:!0})}}return(i,u)=>{const m=e.resolveDirective("ripple");return r.data&&r.data.length?(e.openBlock(),e.createElementBlock("ul",{key:0,class:e.normalizeClass([e.unref(n).b()])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(r.data,h=>e.withDirectives((e.openBlock(),e.createElementBlock("li",{class:e.normalizeClass([e.unref(n).e("item"),e.unref(n).is("active",s.value===h.id)]),onClick:()=>a(h.id)},[s.value===h.id?(e.openBlock(),e.createElementBlock("span",{key:0,class:e.normalizeClass([e.unref(n).e("bar")])},null,2)):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(h.text),1)],10,Q)),[[m,!0]])),256))],2)):e.createCommentVNode("",!0)}}}),ee=_(Z,[["__scopeId","data-v-8b9791ff"]]),R=G("ImAnchor",ee),te=[B,C,w,z,T,b,R],ne=(o,n)=>{o.provide(V,{size:(n==null?void 0:n.size)||36,zIndex:(n==null?void 0:n.zIndex)||1e3}),o.directive("ripple",W),te.forEach(t=>{t.name?o.component(t.name,t):console.warn(`组件${t}缺少name属性`)})},oe={install:ne};exports.ImAnchor=R;exports.ImButton=B;exports.ImCol=C;exports.ImDivider=b;exports.ImIcon=T;exports.ImInput=z;exports.ImRow=w;exports.default=oe;
